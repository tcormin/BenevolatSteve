<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:rich="http://richfaces.org/rich" xmlns:p="http://primefaces.org/rich">

<body>
<ui:composition template="WEB-INF/templates/template.xhtml">

    <ui:define name="title"><ui:insert name="Rich faces sample" /></ui:define>

    <ui:define name="mainContent">
    	<!-- Informations -->
    	
    	<h1>#{missionView.m.titre}</h1>
        <div style="position:relative; width:70%; height:30%; float:left;">
			<h:panelGrid columns="2">
				<h:outputText value="Catégorie :" />
				<h:outputText value="#{missionView.m.categorie}" />
				
				<h:outputText value="Evenement associé :" />
				<h:outputText value="#{missionView.m.evenement.nom}"/>
				
				<h:outputText value="Dates :"/>
				<h:outputText value=""/>
				
				<h:outputText value="Lieu :" />
				<h:outputText value="#{missionView.m.lieu}"/>
				
				<h:outputText value="Nombre de places :" />
				<h:outputText value="#{missionView.m.nombreBenevoles}"/>
				
				<h:outputText value="Association :" />
				<h:outputText value="#{missionView.m.association.nom}"/>
				
			</h:panelGrid>
		</div>
		
		<!-- Boutons -->
		<div style="position:relative; width:29%; height:30%; float:left;">
		
			<h:panelGrid columns="1">
	
				<h:form>
	        		<a4j:commandButton value="Supprimer cette mission" action="#{missionView.delete()}" />
		        </h:form>
		        
				<h:commandButton value="S'inscrire">
		        	<rich:componentControl target="popup" operation="show" />
				</h:commandButton>
				<h:commandButton value="Supprimer">
		        	<rich:componentControl target="popupDelete" operation="show" />
				</h:commandButton>
				<h:form>
			    <h:commandLink id="cmdInscriptionsMission" action="inscriptionsMission">
		            <a4j:param name="nextMission" value="#{missionView.m.id}" assignTo="#{inscriptionsMissionView.nextMission}"/>
	               	<h:outputText value="Voir les inscriptions"/>
				</h:commandLink>
			    </h:form>
			</h:panelGrid>
			
		    <rich:popupPanel id="popup" modal="true" resizeable="true" onmaskclick="#{rich:component('popup')}.hide()">
		        <f:facet name="header">
		            <h:outputText value="Confirmation d'inscription" />
		        </f:facet>
		        <f:facet name="controls">
		        </f:facet>
		        <p>Vous êtes sur le point de vous inscrire à cette mission...</p>
		        <h:panelGrid columns="3">
			        <h:outputLink value="#" onclick="#{rich:component('popup')}.hide(); return true;">
						Valider
					</h:outputLink>
					<h:outputText value="" />
			        <h:outputLink value="#" onclick="#{rich:component('popup')}.hide(); return false;">
						Annuler
					</h:outputLink>
				</h:panelGrid>
		    </rich:popupPanel>
		    
    		<rich:popupPanel id="popupDelete" modal="true" resizeable="true" onmaskclick="#{rich:component('popup')}.hide()">
		        <f:facet name="header">
		            <h:outputText value="Suppression de la mission" />
		        </f:facet>
		        <f:facet name="controls">
		        	<h:outputLink value="#" onclick="#{rich:component('popupDelete')}.hide(); return false;">
		                X
		            </h:outputLink>
		        </f:facet>
		        <p>Vous êtes sur le point de supprimer définitivement cette mission...</p>
		        <h:form>
		        	<h:commandButton style="align:center;" value="Confirmer" action="#{missionView.delete}"/>
		        </h:form>
		    </rich:popupPanel>
		</div>
		
		<!-- Votre mission -->
		<div style="position:relative; width:100%; height:30%; float:left;">
			<h2>Votre mission</h2>
			<h:outputText value="#{missionView.m.description}"/>
		</div>
		
		<!-- Association -->
		<div style="position:relative; width:100%; height:25%; float:left;">
			<h2>L'association</h2>
			<h:outputText value="#{missionView.m.association.presentation}"/>
		</div>
		

    </ui:define>
    
</ui:composition>
</body>
</html>