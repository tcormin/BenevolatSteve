<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:a4j="http://richfaces.org/a4j" xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:rich="http://richfaces.org/rich" xmlns:p="http://primefaces.org/rich">

<body>
<ui:composition template="WEB-INF/templates/template.xhtml">

    <ui:define name="title"><ui:insert name="Rich faces sample" /></ui:define>

    <ui:define name="mainContent">
		
		<h:form>
		    <a4j:commandButton value="Ajouter une mission" style="position: absolute; top: 0 px; left: 650px;" id="cmdNewMission" action="newMission">
		    </a4j:commandButton>
		</h:form>
		
		<h1>Mes missions</h1>

	   		<rich:accordion switchType="client">
	   		
	   			<rich:accordionItem header="Incomplètes">
					<div style="position:relative; width:100%; height:100%; float:left;">
						<h:form>
				   		<rich:extendedDataTable value="#{myMissionsView.missionsIncompletes}"
	                                var="m" id="tableI" frozenColumns="6" noDataLabel="Aucune mission incomplète"
	                                style="height:100%; width:100%;" selectionMode="none">         
				            
				            <rich:column  width="160px">
				                <f:facet name="header">
				                    <h:outputText value="Titre"/>
				                </f:facet>
				                <h:commandLink id="cmdProfileMission" action="profileMission">
						            <a4j:param name="nextMission" value="#{m.id}" assignTo="#{missionView.nextMission}"/>
				                	<h:outputText value="#{m.titre}"/>
				                </h:commandLink>
				            </rich:column>
				            
				            <rich:column width="160px">
				                <f:facet name="header">
				                    <h:outputText value="Date(s)"/>
				                </f:facet>
				                <h:outputText value="#{m.date()}"/>
				            </rich:column>
				            
				            <rich:column width="80px">
				                <f:facet name="header">
				                    <h:outputText value="Type"/>
				                </f:facet>
				                <h:outputText value="#{m.typeMission()}"/>
				            </rich:column>
				            
					       <rich:column width="140px">
				                <f:facet name="header">
				                    <h:outputText value="Inscriptions"/>
				                </f:facet>
				                <h:outputText value="#{m.placesRestantes} place-s restante-s sur #{m.nombreBenevoles}"/>
				            </rich:column>
				            
							<rich:column width="200px">
				                <f:facet name="header">
				                	<h:outputText value="Voir les inscrits"/>
				                </f:facet>
				                <h:commandLink id="cmdInscriptionsMission" action="inscrits" value="Voir les inscriptions">
						            <a4j:param name="nextInscriptionMission" value="#{m.id}" assignTo="#{inscritsView.nextMission}"/>
				                </h:commandLink>
				            </rich:column>
				            
		       			</rich:extendedDataTable>
		       			</h:form>
			   		</div>
			   	</rich:accordionItem>
			   	
			   	<rich:accordionItem header="Complètes">
			   		<div style="position:relative; width:100%; height:100%; float:left;">
			   			<h:form>
						<rich:extendedDataTable value="#{myMissionsView.missionsCompletes}"
                                var="m" id="tableC" frozenColumns="5" noDataLabel="Aucune mission complète"
                                style="height:100%; width:100%;" selectionMode="none">
                                
                        	<rich:column  width="160px">
				                <f:facet name="header">
				                    <h:outputText value="Titre"/>
				                </f:facet>
				                <h:commandLink id="cmdProfileMission" action="profileMission">
						            <a4j:param name="nextMission" value="#{m.id}" assignTo="#{missionView.nextMission}"/>
				                	<h:outputText value="#{m.titre}"/>
				                </h:commandLink>
				            </rich:column>
				            
				            <rich:column width="160px">
				                <f:facet name="header">
				                    <h:outputText value="Date(s)"/>
				                </f:facet>
				                <h:outputText value="#{m.date()}"/>
				            </rich:column>
				            
				            <rich:column width="80px">
				                <f:facet name="header">
				                    <h:outputText value="Type"/>
				                </f:facet>
				                <h:outputText value="#{m.typeMission()}"/>
				            </rich:column>
				            
					       <rich:column width="140px">
				                <f:facet name="header">
				                    <h:outputText value="Nombre d'inscrits"/>
				                </f:facet>
				                <h:outputText value=""/>
				            </rich:column>
				            
							<rich:column width="200px">
				                <f:facet name="header">
				                    <h:outputText value="Voir les inscrits"/>
				                </f:facet>
				                <h:commandLink id="cmdInscriptionsMission" action="inscrits" value="Voir les inscriptions">
						            <a4j:param name="nextInscriptionMission" value="#{m.id}" assignTo="#{inscritsView.nextMission}"/>
				                </h:commandLink>
				            </rich:column>
                                
			   			</rich:extendedDataTable>
			   			</h:form>
			   		</div>
			   	</rich:accordionItem>
			   	
			   	<rich:accordionItem header="Terminées">
			   		<div style="position:relative; width:100%; height:100%; float:left;">
			   			<h:form>
						<rich:extendedDataTable value="#{myMissionsView.missionsTerminees}"
                                var="m" id="tableT" frozenColumns="4" noDataLabel="Aucune mission terminée"
                                style="height:100%; width:100%;" selectionMode="none">
                                
                        	<rich:column width="160px">
				                <f:facet name="header">
				                    <h:outputText value="Titre"/>
				                </f:facet>
				                <h:commandLink id="cmdMyMissions" action="profileMission">
						            <a4j:param name="nextMission" value="#{m.id}" assignTo="#{missionView.nextMission}"/>
				                	<h:outputText value="#{m.titre}"/>
				                </h:commandLink>
				            </rich:column>
				            
				            <rich:column width="160px">
				                <f:facet name="header">
				                    <h:outputText value="Date(s)"/>
				                </f:facet>
				                <h:outputText value="#{m.date()}"/>
				            </rich:column>
				            
				            <rich:column width="80px">
				                <f:facet name="header">
				                    <h:outputText value="Type"/>
				                </f:facet>
				                <h:outputText value="#{m.typeMission()}"/>
				            </rich:column>
				            
							<rich:column width="250px">
				                <f:facet name="header">
				                    <h:outputText value="Confirmer les bénévoles présents"/>
				                </f:facet>
				                <h:commandLink id="cmdInscriptionsMission" action="inscrits" value="Voir les inscriptions">
						            <a4j:param name="nextInscriptionMission" value="#{m.id}" assignTo="#{inscritsView.nextMission}"/>
				                </h:commandLink>
				            </rich:column>
                                
			   			</rich:extendedDataTable>
			   			</h:form>
			   		</div>
		        </rich:accordionItem>
		        
		        <rich:accordionItem header="Archives">
			   		<div style="position:relative; width:100%; height:100%; float:left;">
			   			<h:form>
						<rich:extendedDataTable value="#{myMissionsView.missionsArchives}"
                                var="m" id="tableAttestation" frozenColumns="3" noDataLabel="Aucune archive"
                                style="height:100%; width:100%;" selectionMode="none">
                                
                        	<rich:column width="160px">
				                <f:facet name="header">
				                    <h:outputText value="Titre"/>
				                </f:facet>
				                <h:commandLink id="cmdMyMissions" action="profileMission">
						            <a4j:param name="nextMission" value="#{m.id}" assignTo="#{missionView.nextMission}"/>
				                	<h:outputText value="#{m.titre}"/>
				                </h:commandLink>
				            </rich:column>
				            
				            <rich:column width="160px">
				                <f:facet name="header">
				                    <h:outputText value="Date(s)"/>
				                </f:facet>
				                <h:outputText value="#{m.date()}"/>
				            </rich:column>
				            
				            <rich:column width="80px">
				                <f:facet name="header">
				                    <h:outputText value="Type"/>
				                </f:facet>
				                <h:outputText value="#{m.typeMission()}"/>
				            </rich:column>
                                
                            <rich:column width="250px">
				                <f:facet name="header">
				                    <h:outputText value="Voir les bénévoles"/>
				                </f:facet>
				                <h:commandLink id="cmdInscriptionsMission" action="inscrits" value="Voir les inscriptions">
						            <a4j:param name="nextInscriptionMission" value="#{m.id}" assignTo="#{inscritsView.nextMission}"/>
				                </h:commandLink>
				            </rich:column>
			   			</rich:extendedDataTable>
			   			</h:form>
			   		</div>
		        </rich:accordionItem>
	        </rich:accordion>
    </ui:define>
    
</ui:composition>
</body>
</html>